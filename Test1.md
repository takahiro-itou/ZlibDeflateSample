
# Test Data 1

- データ準備

```
import zlib

text = b'\x00' * 32
enc = zlib.compress(text)

with open('Test1.z', 'wb') as fw:
    fw.write(enc)
```

- 元データ (32 bytes)

```
00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
```

- 圧縮データ (11 bytes)

```
78 9C 63 60 C0 0F 00 00 20 00 01
```

##  ヘッダ

- 78 9C

```
・0111 1000  1001 1100
↓
・0111 1000 10 0 11100

0111  : Window Size = 7 => 2^(7+8) = 32k
1000  : 圧縮モード 8 (Z_DEFLATE)
10    : 圧縮レベル 2
0     : プリセット辞書 (なし)
11100 : ヘッダチェック
```

##  Deflate ブロック

```
Bytes: 63 60 C0 0F 00
Bits:
002:    1100 0110
003:    0000 0110
004:    0000 0011
005:    1111 0000
006:    0000 0000
...
```

Deflate ヘッダ

|  Size  | Value |     Comment     |
|-------:|:------|:----------------|
|  1 bit | 1     | 最終ブロック    |
|  2 bit | 01    | 固定ハフマン    |

###  固定ハフマン符号の符号表

|     値     | # bits |          符号          |
|-----------:|-------:|:-----------------------|
|   0 ～ 143 |  8 bit | 00110000  ～ 10111111  |
| 144 ～ 255 |  9 bit | 110010000 ～ 111111111 |
| 256 ～ 279 |  7 bit | 0000000   ～ 0010111   |
| 280 ～ 287 |  8 bit | 11000000  ～ 1100111   |

符号から値への復号

|    符号    | # bits |  値  |
|:-----------|-------:|-----:|
| 0000000    |  7 bit |  256 |
| 0000001    |  7 bit |  257 |
| 0000010    |  7 bit |  258 |
| .......    |  7 bit |  ... |
| 0010111    |  7 bit |  279 |
| 00110000   |  8 bit |    0 |
| 00110001   |  8 bit |    1 |
| 00110010   |  8 bit |    2 |
| ........

###  データ本体の解析

```
IN : 002:   ...0 0110   000. ....
00110000 => 0
OUT: 0
````

```
IN : 003:   ...0 0110   000. ....
00110000 => 0
OUT: 00
````


##  チェックサム

- Adler-32

```
007:    00 20 00 01
```

