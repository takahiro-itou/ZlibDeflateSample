# Test Data 5

- 圧縮データ (31 bytes)

```
78 9C 15 C5 41 11 00 00  00 01 C1 6C 87 04 FA 87
31 5E 8B 8A C0 C9 19 00  00 00 00 ?? ?? ?? ??
```

##  ヘッダ

- 78 9C

```
・0111 1000  1001 1100
↓
・0111 1000 10 0 11100

0111  : Window Size = 7 => 2^(7+8) = 32k
1000  : 圧縮モード 8 (Z_DEFLATE)
10    : 圧縮レベル 2
0     : プリセット辞書 (なし)
11100 : ヘッダチェック
```

##  Deflate ブロック

```
Bytes:
.. .. 15 C5 41 11 00 00  00 01 C1 6C 87 04 FA 87
31 5E 8B 8A C0 C9 19 00  00 00 00

Bits:
002:    15  1010 1000
003:    C5  1010 0011
004:    41  1000 0010
005:    11  1000 1000
006:    00  0000 0000
007:    00  0000 0000

008:    00  0000 0000
009:    01  1000 0000
00A:    C1  1000 0011
00B:    6C  0011 0110
00C:    87  1110 0001
00D:    04  0010 0000
00E:    FA  0101 1111
00F:    87  1110 0001

010:    31  1000 1100
011:    5E  0111 1010
012:    8B  1101 0001
013:    8A  0101 0001
014:    C0  0000 0011
015:    C9  1001 0011
016:    19  1001 1000
```

- Deflate ヘッダ

|  Size  | Value |      Comment      |
|-------:|:------|:------------------|
|  1 bit | 1     | 最終ブロック      |
|  2 bit | 10    | カスタムハフマン  |

- データの個数

```
BITS:   ...0 1000   1010 0011   1... ....
PATS:   01000 10100 0111
```

|  Data  |  Size  |  Raw  | Value | 実際の個数 |
|:-------|-------:|:------|------:|-----------:|
| HLIT   |  5 bit | 00010 |     2 |        259 |
| HDIST  |  5 bit | 00101 |     5 |          6 |
| HCLEN  |  4 bit | 1000  |    14 |         18 |

- 桁数表 (54 bits)

```
ADDR:   004         005         006         007         008         009         00A
BITS:   .000 0010   1000 1000   0000 0000   0000 0000   0000 0000   1000 0000   1000 001.
PATS:   000 001 010 001 000 000 000 000 000 000 000 000 000 100 000 001 000 001 xxx
ID  :    16  17  18   0   8   7   9   6  10   5  11   4  12   3  13   2  14   1  15
```

| ID | Raw | Value |
|---:|:----|------:|
| 16 | 000 |     0 |
| 17 | 100 |     4 |
| 18 | 010 |     2 |
|  0 | 100 |     4 |
|  8 | 000 |     0 |
|  7 | 000 |     0 |
|  9 | 000 |     0 |
|  6 | 000 |     0 |
| 10 | 000 |     0 |
|  5 | 000 |     0 |
| 11 | 000 |     0 |
|  4 | 000 |     0 |
| 12 | 000 |     0 |
|  3 | 001 |     1 |
| 13 | 000 |     0 |
|  2 | 100 |     4 |
| 14 | 000 |     0 |
|  1 | 100 |     4 |
| 15 | *** |     0 |

- 符号長のカノニカルハフマン符号

| 符号長 | 符号長の符号長 | 符号長の符号 |
|-------:|---------------:|:-------------|
|      3 |              1 | 0            |
|     18 |              2 | 10           |
|      0 |              4 | 1100         |
|      1 |              4 | 1101         |
|      2 |              4 | 1110         |
|     17 |              4 | 1111         |

- 文字／一致長の符号長表 (HLIT=259)

```
ADDR:   00A         00B         00C         00D         00E          00F
BITS:   .... ...1   0011 0110   1110 0001   0010 0000   0101 1111   1110 0001

ADDR:   010         011
BITS:   1000 1100   0111 1010
```

|  Index  | ADDRs | PATS | ExtraBit | Len | 結果 |
|--------:|:-----:|:-----|:---------|----:|-----:|
| 0  - 64 | 00A.7 | 10   | 011 0110 |  65 |    0 |
|      65 | 00C.0 | 1110 |          |     |    2 |
|      66 | 00C.4 | 0    |          |     |    3 |
|      67 | 00C.5 | 0    |          |     |    3 |
|      68 | 00C.6 | 0    |          |     |    3 |
| 69 - 81 | 00C.7 | 10   | 010 0000 |  13 |    0 |
|      82 | 00E.0 | 0    |          |     |    3 |
|  83-220 | 00E.1 | 10   | 11111 11 | 138 |    0 |
| 221-255 | 00F.2 | 10   | 0001 100 |  35 |    0 |
|     256 | 010.3 | 0    |          |     |    3 |
|     257 | 010.4 | 1100 |          |     |    0 |
|     258 | 011.0 | 0    |          |     |    3 |
| 259-285 | ***** | **** |          |     |    0 |

- 文字／一致長の符号表

| Val | 符号長 | 符号 |
|----:|-------:|:-----|
|  65 |      2 | 00   |
|  66 |      3 | 010  |
|  67 |      3 | 011  |
|  68 |      3 | 100  |
|  82 |      3 | 101  |
| 256 |      3 | 110  |
| 258 |      3 | 111  |

- 距離の符号長表 (HDIST=4)

```
ADDR:   011         012
BITS:   .111 1010   1101 ....
```

|  Index  | ADDRs | PATS | ExtraBit | Len | 結果 |
|--------:|:-----:|:-----|:---------|----:|-----:|
|  0  - 4 | 011.1 | 1111 | 010      |   5 |    0 |
|       5 | 012.0 | 1101 |          |     |    1 |

- 距離の符号表

| Val | 符号長 | 符号 |
|----:|-------:|:-----|
|   5 |      1 | 0    |

###  データ本体の解析

```
ADDR:   012         013         014         015         016
BITS:   .... 0001   0101 0001   0000 0011   1001 0011   1001 1000
```

| ADDRs | PATS | Val | #Ext | Extra |
|:-----:|:-----|----:|-----:|:------|
| 012.4 | 00   |  65 |    0 |       |
| 012.6 | 010  |  66 |    0 |       |
| 013.1 | 101  |  82 |    0 |       |
| 013.4 | 00   |  65 |    0 |       |
| 013.6 | 010  |  66 |    0 |       |
| 014.1 | 00   |  65 |    0 |       |
| 014.3 | 00   |  65 |    0 |       |
| 014.5 | 011  |  67 |    0 |       |
| 015.0 | 100  |  68 |    0 |       |
| 015.3 | 100  |  68 |    0 |       |
| 015.6 | 111  | 258 |    0 |       |
| 016.1 | 0    |   5 |    1 | 0     |
| 016.3 | 110  | 256 |      |       |


##  チェックサム

- Adler-32

```
01B:     ?? ?? ?? ?/
```

